<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WordMatch - Phrases Mode</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #10b981 0%, #14b8a6 100%);
            min-height: 100vh;
            color: white;
            padding: 16px;
        }
        .container { max-width: 600px; margin: 0 auto; }
        h1 { text-align: center; font-size: 40px; margin: 20px 0 10px; font-weight: 900; }
        .subtitle { text-align: center; opacity: 0.9; margin-bottom: 30px; }
        .category-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 20px 0; }
        .cat-btn {
            padding: 20px 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            text-align: center;
            background: rgba(255,255,255,0.9);
            color: #1f2937;
        }
        .cat-btn:active { transform: scale(0.95); }
        .word-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 20px 0; }
        .word-column { display: flex; flex-direction: column; gap: 12px; }
        .word-btn {
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            word-wrap: break-word;
            line-height: 1.3;
            transition: opacity 0.2s;
        }
        .word-btn:active { opacity: 0.8; }
        .blue { background: #3b82f6; color: white; }
        .purple { background: #8b5cf6; color: white; }
        .blue.selected, .purple.selected { opacity: 0.6; }
        .blue.matched { background: #93c5fd; color: #1e3a8a; opacity: 0.5; }
        .purple.matched { background: #c4b5fd; color: #5b21b6; opacity: 0.5; }
        .header {
            background: white;
            color: #1f2937;
            padding: 16px;
            border-radius: 16px;
            margin-bottom: 16px;
        }
        .stats { display: flex; gap: 8px; margin-top: 12px; }
        .stat {
            flex: 1;
            background: #f3f4f6;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-size: 11px;
        }
        .stat-value { font-size: 18px; font-weight: bold; color: #10b981; }
        .controls { display: flex; gap: 12px; margin-top: 16px; }
        .control-btn {
            flex: 1;
            padding: 14px;
            background: white;
            color: #1f2937;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
        }
        .back-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            margin-bottom: 16px;
            cursor: pointer;
            font-size: 14px;
        }
        .emoji { font-size: 28px; margin-bottom: 6px; }
        .feedback {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 24px 48px;
            border-radius: 16px;
            font-size: 24px;
            font-weight: bold;
            z-index: 1000;
            animation: fadeInOut 0.6s;
        }
        .feedback.correct { background: #10b981; color: white; }
        .feedback.wrong { background: #ef4444; color: white; }
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="app"></div>
    </div>
    <script>
const PHRASES = {
    greetings: `Good morning|Buenos d√≠as,Good afternoon|Buenas tardes,Good evening|Buenas noches,How are you?|¬øC√≥mo est√°s?,I'm fine, thanks|Estoy bien, gracias,And you?|¬øY t√∫?,Nice to meet you|Encantado de conocerte,See you later|Hasta luego,See you tomorrow|Hasta ma√±ana,Have a good day|Que tengas un buen d√≠a,Welcome|Bienvenido,Long time no see|Cu√°nto tiempo sin verte,How's it going?|¬øQu√© tal?,What's up?|¬øQu√© pasa?,Take care|Cu√≠date`.split(','),
    
    courtesy: `Please|Por favor,Thank you very much|Muchas gracias,You're welcome|De nada,Excuse me|Disculpe,I'm sorry|Lo siento,No problem|No hay problema,Don't worry|No te preocupes,Excuse me (to pass)|Permiso,Bless you|Salud,My pleasure|Es un placer,With pleasure|Con mucho gusto,Sorry for the inconvenience|Perd√≥n por las molestias,I apologize|Pido disculpas,May I?|¬øPuedo?,After you|Despu√©s de usted`.split(','),
    
    conversation: `What's your name?|¬øC√≥mo te llamas?,My name is...|Me llamo...,Where are you from?|¬øDe d√≥nde eres?,I'm from...|Soy de...,How old are you?|¬øCu√°ntos a√±os tienes?,I am ... years old|Tengo ... a√±os,Do you speak English?|¬øHablas ingl√©s?,I speak a little Spanish|Hablo un poco de espa√±ol,I don't understand|No entiendo,Can you repeat that?|¬øPuedes repetir?,More slowly, please|M√°s despacio, por favor,What does that mean?|¬øQu√© significa eso?,How do you say...?|¬øC√≥mo se dice...?,I don't speak Spanish|No hablo espa√±ol,Can you help me?|¬øPuedes ayudarme?,Of course|Por supuesto,I think so|Creo que s√≠,I don't think so|Creo que no,Maybe|Quiz√°s,Exactly|Exactamente`.split(','),
    
    questions: `What?|¬øQu√©?,Who?|¬øQui√©n?,Where?|¬øD√≥nde?,When?|¬øCu√°ndo?,Why?|¬øPor qu√©?,How?|¬øC√≥mo?,How much?|¬øCu√°nto?,How many?|¬øCu√°ntos?,Which one?|¬øCu√°l?,What time is it?|¬øQu√© hora es?,Where is...?|¬øD√≥nde est√°...?,How much does it cost?|¬øCu√°nto cuesta?,What's this?|¬øQu√© es esto?,Can I...?|¬øPuedo...?,Do you have...?|¬øTienes...?,Is there...?|¬øHay...?,Where can I find...?|¬øD√≥nde puedo encontrar...?,What's happening?|¬øQu√© est√° pasando?,What's wrong?|¬øQu√© pasa?,Are you sure?|¬øEst√°s seguro?`.split(','),
    
    restaurant: `A table for two, please|Una mesa para dos, por favor,The menu, please|El men√∫, por favor,I would like...|Me gustar√≠a...,I'll have...|Voy a tomar...,What do you recommend?|¬øQu√© recomiendas?,I'm vegetarian|Soy vegetariano,I'm allergic to...|Soy al√©rgico a...,The check, please|La cuenta, por favor,Is service included?|¬øEst√° incluido el servicio?,It was delicious|Estaba delicioso,Can I have the bill?|¬øMe trae la cuenta?,Do you accept credit cards?|¬øAceptan tarjetas de cr√©dito?,A glass of water, please|Un vaso de agua, por favor,Another round, please|Otra ronda, por favor,Enjoy your meal|Buen provecho,I'm full|Estoy lleno,I'm hungry|Tengo hambre,I'm thirsty|Tengo sed,To go, please|Para llevar, por favor,Can I see the wine list?|¬øPuedo ver la carta de vinos?`.split(','),
    
    shopping: `How much is this?|¬øCu√°nto cuesta esto?,It's too expensive|Es muy caro,Do you have it cheaper?|¬øTiene algo m√°s barato?,Can I try it on?|¬øPuedo prob√°rmelo?,What size?|¬øQu√© talla?,I'll take it|Me lo llevo,Do you accept returns?|¬øAceptan devoluciones?,I'm just looking|Solo estoy mirando,Do you have this in...?|¬øTienen esto en...?,What's on sale?|¬øQu√© est√° en oferta?,Can I get a discount?|¬øMe puede hacer un descuento?,Where is the fitting room?|¬øD√≥nde est√° el probador?,Do you have a receipt?|¬øTiene el recibo?,I need a bag|Necesito una bolsa,Cash or card?|¬øEfectivo o tarjeta?,Keep the change|Qu√©dese con el cambio,Can I pay in installments?|¬øPuedo pagar a plazos?,Is this on sale?|¬øEst√° en rebaja?,I want to return this|Quiero devolver esto,When does it close?|¬øA qu√© hora cierra?`.split(','),
    
    directions: `Where is the bathroom?|¬øD√≥nde est√° el ba√±o?,I'm lost|Estoy perdido,Can you show me on the map?|¬øPuede mostrarme en el mapa?,How do I get to...?|¬øC√≥mo llego a...?,Turn left|Gira a la izquierda,Turn right|Gira a la derecha,Go straight|Sigue recto,It's nearby|Est√° cerca,It's far|Est√° lejos,On the corner|En la esquina,At the traffic light|En el sem√°foro,Next to...|Al lado de...,In front of...|Enfrente de...,Behind...|Detr√°s de...,How far is it?|¬øA qu√© distancia est√°?,Can I walk there?|¬øPuedo ir caminando?,Do I need to take a taxi?|¬øNecesito tomar un taxi?,Which bus goes to...?|¬øQu√© autob√∫s va a...?,Where is the nearest...?|¬øD√≥nde est√° el/la m√°s cercano/a...?,Is it this way?|¬øEs por aqu√≠?`.split(','),
    
    travel: `I need a ticket to...|Necesito un billete para...,What time does it leave?|¬øA qu√© hora sale?,What time does it arrive?|¬øA qu√© hora llega?,Where is platform...?|¬øD√≥nde est√° el and√©n...?,I have a reservation|Tengo una reserva,Can I see your passport?|¬øPuedo ver su pasaporte?,I'm here on vacation|Estoy aqu√≠ de vacaciones,How long are you staying?|¬øCu√°nto tiempo te quedas?,I'm staying for ... days|Me quedo ... d√≠as,Where are you staying?|¬øD√≥nde te hospedas?,I have nothing to declare|No tengo nada que declarar,My luggage is lost|Se perdi√≥ mi equipaje,Where is the exit?|¬øD√≥nde est√° la salida?,Call me a taxi, please|Ll√°meme un taxi, por favor,To the airport, please|Al aeropuerto, por favor,Stop here, please|Pare aqu√≠, por favor,How much is the fare?|¬øCu√°nto es la tarifa?,Can I have a receipt?|¬øMe puede dar un recibo?,Is this the right train?|¬øEs este el tren correcto?,I missed my flight|Perd√≠ mi vuelo`.split(','),
    
    hotel: `I have a reservation|Tengo una reserva,Check in, please|Registrarme, por favor,Check out, please|Salida, por favor,Do you have any rooms available?|¬øTienen habitaciones disponibles?,How much per night?|¬øCu√°nto por noche?,Can I see the room?|¬øPuedo ver la habitaci√≥n?,I need a wake-up call|Necesito que me despierten,What time is breakfast?|¬øA qu√© hora es el desayuno?,The WiFi password, please|La contrase√±a del WiFi, por favor,Can I have an extra towel?|¬øPuedo tener una toalla extra?,The air conditioning doesn't work|El aire acondicionado no funciona,Can you call me a taxi?|¬øPuede llamarme un taxi?,Where is the elevator?|¬øD√≥nde est√° el ascensor?,I'd like to extend my stay|Me gustar√≠a extender mi estancia,Can I leave my luggage here?|¬øPuedo dejar mi equipaje aqu√≠?,What time is checkout?|¬øA qu√© hora es la salida?,Do you have a safe?|¬øTienen caja fuerte?,The room needs cleaning|La habitaci√≥n necesita limpieza,Can I have my bill?|¬øPuedo tener mi cuenta?,Is breakfast included?|¬øEst√° incluido el desayuno?`.split(','),
    
    emergency: `Help!|¬°Ayuda!,Call the police!|¬°Llame a la polic√≠a!,Call an ambulance!|¬°Llame una ambulancia!,I need a doctor|Necesito un m√©dico,Where is the hospital?|¬øD√≥nde est√° el hospital?,I'm lost|Estoy perdido,I don't feel well|No me siento bien,It's an emergency|Es una emergencia,I need help|Necesito ayuda,Stop!|¬°Alto!,Be careful!|¬°Ten cuidado!,Fire!|¬°Fuego!,I've been robbed|Me han robado,I lost my passport|Perd√≠ mi pasaporte,Can you help me?|¬øPuede ayudarme?,I need to contact my embassy|Necesito contactar mi embajada,I'm allergic to...|Soy al√©rgico a...,I have insurance|Tengo seguro,Where is the police station?|¬øD√≥nde est√° la comisar√≠a?,It hurts here|Me duele aqu√≠`.split(','),
    
    feelings: `I'm happy|Estoy feliz,I'm sad|Estoy triste,I'm tired|Estoy cansado,I'm excited|Estoy emocionado,I'm worried|Estoy preocupado,I'm nervous|Estoy nervioso,I'm bored|Estoy aburrido,I'm angry|Estoy enojado,I'm scared|Tengo miedo,I'm confused|Estoy confundido,I'm surprised|Estoy sorprendido,I'm stressed|Estoy estresado,I'm relaxed|Estoy relajado,I'm grateful|Estoy agradecido,I'm disappointed|Estoy decepcionado,I'm proud|Estoy orgulloso,I'm embarrassed|Estoy avergonzado,I'm frustrated|Estoy frustrado,I'm hopeful|Tengo esperanza,I'm comfortable|Estoy c√≥modo`.split(','),
};

const CATEGORIES = [
    { key: 'greetings', name: 'Greetings', emoji: 'üëã' },
    { key: 'courtesy', name: 'Courtesy', emoji: 'üôè' },
    { key: 'conversation', name: 'Conversation', emoji: 'üí¨' },
    { key: 'questions', name: 'Questions', emoji: '‚ùì' },
    { key: 'restaurant', name: 'Restaurant', emoji: 'üçΩÔ∏è' },
    { key: 'shopping', name: 'Shopping', emoji: 'üõçÔ∏è' },
    { key: 'directions', name: 'Directions', emoji: 'üó∫Ô∏è' },
    { key: 'travel', name: 'Travel', emoji: '‚úàÔ∏è' },
    { key: 'hotel', name: 'Hotel', emoji: 'üè®' },
    { key: 'emergency', name: 'Emergency', emoji: 'üö®' },
    { key: 'feelings', name: 'Feelings', emoji: 'üòä' },
];

function parsePhrases(str) {
    return str.map(pair => {
        const [e, s] = pair.split('|');
        return { e, s };
    });
}

let state = {
    category: '',
    score: 0,
    matched: 0,
    streak: 0,
    round: 0,
    selected: [],
    matchedIds: [],
    currentPairs: [],
    used: new Set()
};

function shuffle(arr) {
    return [...arr].sort(() => Math.random() - 0.5);
}

function showFeedback(isCorrect) {
    const feedback = document.createElement('div');
    feedback.className = `feedback ${isCorrect ? 'correct' : 'wrong'}`;
    feedback.textContent = isCorrect ? 'Perfect! ‚úì' : 'Wrong! ‚úó';
    document.body.appendChild(feedback);
    setTimeout(() => feedback.remove(), 600);
}

function startGame(cat) {
    state.category = cat;
    state.score = 0;
    state.matched = 0;
    state.streak = 0;
    state.round = 0;
    state.used = new Set();
    nextRound();
}

function nextRound() {
    state.selected = [];
    state.matchedIds = [];
    state.round++;
    
    const allPhrases = parsePhrases(PHRASES[state.category]);
    const available = allPhrases.filter((_, i) => !state.used.has(i));
    
    if (available.length < 5) {
        state.used = new Set();
    }
    
    const pairs = [];
    const used = new Set(state.used);
    
    while (pairs.length < 5 && pairs.length < allPhrases.length) {
        const idx = Math.floor(Math.random() * allPhrases.length);
        if (!used.has(idx)) {
            pairs.push({ ...allPhrases[idx], id: pairs.length });
            used.add(idx);
        }
    }
    
    state.used = used;
    state.currentPairs = pairs;
    renderGame();
}

function renderCategorySelect() {
    const app = document.getElementById('app');
    app.innerHTML = `
        <h1>Phrase Match</h1>
        <p class="subtitle">Choose a category</p>
        <div class="category-grid">
            ${CATEGORIES.map(cat => `
                <button class="cat-btn" onclick="startGame('${cat.key}')">
                    <div class="emoji">${cat.emoji}</div>
                    <div>${cat.name}</div>
                </button>
            `).join('')}
        </div>
    `;
}

function renderGame() {
    const english = shuffle(state.currentPairs.map(p => ({...p, side: 'en'})));
    const spanish = shuffle(state.currentPairs.map(p => ({...p, side: 'es'})));
    const catName = CATEGORIES.find(c => c.key === state.category).name;
    
    document.getElementById('app').innerHTML = `
        <button class="back-btn" onclick="renderCategorySelect()">‚Üê Change Category</button>
        
        <div class="header">
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <div>
                    <h2 style="margin: 0; font-size: 20px;">Phrase Match</h2>
                    <div style="font-size: 12px; opacity: 0.7;">${catName}</div>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 28px; font-weight: 900; color: #10b981;">${state.score}</div>
                    <div style="font-size: 11px; opacity: 0.7;">points</div>
                </div>
            </div>
            <div class="stats">
                <div class="stat">
                    <div class="stat-value">${state.matched}</div>
                    <div>Matched</div>
                </div>
                <div class="stat">
                    <div class="stat-value">${state.streak}</div>
                    <div>Streak</div>
                </div>
                <div class="stat">
                    <div class="stat-value">${state.round}</div>
                    <div>Round</div>
                </div>
            </div>
        </div>
        
        <div class="word-grid">
            <div class="word-column">
                ${english.map(w => `
                    <button 
                        class="word-btn blue ${state.selected.includes('en'+w.id) ? 'selected' : ''} ${state.matchedIds.includes(w.id) ? 'matched' : ''}"
                        onclick="selectWord('en${w.id}', ${w.id})"
                        ${state.matchedIds.includes(w.id) ? 'disabled' : ''}
                    >
                        ${w.e}
                    </button>
                `).join('')}
            </div>
            <div class="word-column">
                ${spanish.map(w => `
                    <button 
                        class="word-btn purple ${state.selected.includes('es'+w.id) ? 'selected' : ''} ${state.matchedIds.includes(w.id) ? 'matched' : ''}"
                        onclick="selectWord('es${w.id}', ${w.id})"
                        ${state.matchedIds.includes(w.id) ? 'disabled' : ''}
                    >
                        ${w.s}
                    </button>
                `).join('')}
            </div>
        </div>
        
        <div class="controls">
            <button class="control-btn" onclick="nextRound()">New Phrases</button>
            <button class="control-btn" onclick="renderCategorySelect()">Reset</button>
        </div>
    `;
}

function selectWord(wordId, pairId) {
    if (state.selected.includes(wordId) || state.matchedIds.includes(pairId)) return;
    
    state.selected.push(wordId);
    
    const btn = document.querySelector(`button[onclick="selectWord('${wordId}', ${pairId})"]`);
    if (btn) btn.classList.add('selected');
    
    if (state.selected.length === 2) {
        const id1 = parseInt(state.selected[0].slice(2));
        const id2 = parseInt(state.selected[1].slice(2));
        
        if (id1 === id2) {
            showFeedback(true);
            state.matchedIds.push(pairId);
            state.score += 12;
            state.matched += 1;
            state.streak += 1;
            
            state.selected.forEach(id => {
                const b = document.querySelectorAll(`button[onclick*="${id}"]`)[0];
                if (b) {
                    b.classList.remove('selected');
                    b.classList.add('matched');
                    b.disabled = true;
                }
            });
            
            setTimeout(() => {
                state.selected = [];
                if (state.matchedIds.length === 5) {
                    setTimeout(nextRound, 500);
                }
            }, 600);
        } else {
            showFeedback(false);
            state.streak = 0;
            setTimeout(() => {
                state.selected.forEach(id => {
                    const b = document.querySelectorAll(`button[onclick*="${id}"]`)[0];
                    if (b) b.classList.remove('selected');
                });
                state.selected = [];
            }, 600);
        }
    }
}

renderCategorySelect();
    </script>
</body>
</html>
